<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qs.classhelper.dao.TbDateMapper">
  <resultMap id="BaseResultMap" type="qs.classhelper.entity.TbDate">
    <id column="c_dateTime" jdbcType="VARCHAR" property="cDatetime" />
     <result column="number" property="count" jdbcType="INTEGER" />
   <collection  property="tbCourseTable" javaType="ArrayList" ofType="qs.classhelper.entity.TbCoursetable"
    column="c_dateTime" select="getTbCourseScoreByDate" />
  </resultMap>
  
   <resultMap id="BaseResultMap_csore" type="qs.classhelper.entity.TbCoursetable" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jan 22 14:17:54 CST 2018.
    -->
    <id column="scoreNum" property="scorenum" jdbcType="INTEGER" />
    <result column="c_dateTime" property="cDatetime" jdbcType="VARCHAR" />
    <result column="c_classromm" property="cClassromm" jdbcType="VARCHAR" />
    <result column="c_morning1_class" property="cMorning1Class" jdbcType="VARCHAR" />
    <result column="c_morning1_teacher" property="cMorning1Teacher" jdbcType="VARCHAR" />
    <result column="c_morning1_course" property="cMorning1Course" jdbcType="VARCHAR" />
    <result column="c_morning2_class" property="cMorning2Class" jdbcType="VARCHAR" />
    <result column="c_morning2_teacher" property="cMorning2Teacher" jdbcType="VARCHAR" />
    <result column="c_morning2_course" property="cMorning2Course" jdbcType="VARCHAR" />
    <result column="c_afternoon1_class" property="cAfternoon1Class" jdbcType="VARCHAR" />
    <result column="c_afternoon1_teacher" property="cAfternoon1Teacher" jdbcType="VARCHAR" />
    <result column="c_afternoon1_course" property="cAfternoon1Course" jdbcType="VARCHAR" />
    <result column="c_afternoon2_class" property="cAfternoon2Class" jdbcType="VARCHAR" />
    <result column="c_afternoon2_teacher" property="cAfternoon2Teacher" jdbcType="VARCHAR" />
    <result column="c_afternoon2_course" property="cAfternoon2Course" jdbcType="VARCHAR" />
    <result column="c_evening_class" property="cEveningClass" jdbcType="VARCHAR" />
    <result column="c_evening_teacher" property="cEveningTeacher" jdbcType="VARCHAR" />
    <result column="c_evening_course" property="cEveningCourse" jdbcType="VARCHAR" />
  </resultMap>
  <!--根据不同的日期分组查询  -->
<select id="getAllDate" resultMap="BaseResultMap">
 SELECT c_dateTime ,COUNT(1) AS number FROM `tb_coursetable` GROUP BY c_dateTime

</select>
<!-- 查询不同日期下的课程 -->
<select id="getTbCourseScoreByDate" parameterType="java.lang.String"   resultMap="BaseResultMap_csore">

SELECT * FROM `tb_coursetable` WHERE c_dateTime=#{date}
</select>
</mapper>